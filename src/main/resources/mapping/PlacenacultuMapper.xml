<?xml version = "1.0" encoding = "UTF-8"?>
<!DOCTYPE mapper PUBLIC
        "-//mybatis.org//DTD com.example.Mapper 3.0//EN"
        "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.csdl.smartplacenew.mapper.PlacenacultuMapper">
    <resultMap id="result" type="com.csdl.smartplacenew.information.Placenacultu">
        <result property="id" column="id"/>
        <result property="name" column="name" />
        <result property="pictureurl" column="pictureurl" />
        <result property="status" column="status" />
        <result property="type" column="type" />
        <result property="userid" column="userid" />
        <result property="abbreviation" column="abbreviation" />
    </resultMap>

    <insert id="addPlacenacultu" >

        insert into placenacultu(
        name,
        type,
        pictureurl,
        status,
        userid,
        abbreviation

        )  values (
        #{name},
        #{type},
        #{pictureurl},
        #{status},
        #{userid},
        #{abbreviation})

    </insert>


    <select id="selectPlacenacultu" resultMap="result">

        select *  from placenacultu where

        <if test="name!=null">
            name like #{name} and
        </if>
        type=#{type} and

        status=1

        and userid=#{userid}


    </select>


    <select id="selectPlacenacultu2" resultMap="result">

        select *  from placenacultu where

        <if test="name!=null">
            name like #{name} and
        </if>
        type=#{type} and

        status=1
and userid=#{userid}



    </select>


    <select id="selectAllPlacenacultu" resultMap="result">

        select *  from placenacultu where status=1

    </select>

    <update id="delPlacenacultu">

        update placenacultu set status=-1 where id=#{id}    and userid=#{userid}

    </update>


    <update id="updatePlacenacultu">


        update  placenacultu
          set name=#{name} ,
          pictureurl=#{pictureurl} ,
          abbreviation=#{abbreviation}

          where id=#{id}   and userid=#{userid}

    </update>


    <select id="getPlacenacultuCount" resultType="integer">


        select count(*)  from placenacultu

        where

        <if test="name!=null">
            name like #{name} and

        </if>
        type=#{type} and

        status=1

        and

        userid=#{userid}


    </select>



    <select id="getPlacenacultuById" resultMap="result">

        select *  from placenacultu where id=#{id} and status=1 and userid=#{userid}


    </select>


    <select id="getPlacenacultuById2" resultMap="result">

        select *  from placenacultu where id=#{id} and status=1    and

        userid=#{userid}


    </select>

    <select id="getPlacenacultuByMaxId" resultMap="result">

        select *  from placenacultu where id=(select max(id)  from placenacultu where status=1  and userid=#{userid}) and status=1  and
        userid=#{userid}


    </select>

</mapper>