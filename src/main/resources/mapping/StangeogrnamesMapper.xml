<?xml version = "1.0" encoding = "UTF-8"?>
<!DOCTYPE mapper PUBLIC
        "-//mybatis.org//DTD com.example.Mapper 3.0//EN"
        "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.csdl.smartplacenew.mapper.StangeogrnamesMapper">
    <resultMap id="result" type="com.csdl.smartplacenew.information.Stangeogrnames">
        <result property="id" column="id"/>
        <result property="name" column="name" />
        <result property="pictureurl" column="pictureurl" />
        <result property="status" column="status" />
        <result property="userid" column="userid" />
    </resultMap>

    <insert id="addStangeogrnames" >

        insert into stangeogrnames(
        name,
        pictureurl,
         status,
         userid)  values (
         #{name},
         #{pictureurl},
         #{status},
         #{userid})

    </insert>


    <select id="selectStangeogrnames" resultMap="result">

        select *  from stangeogrnames where

        <if test="name!=null">
            name like #{name} and
        </if>
        status=1

        and userid=#{userid}

    </select>


    <select id="selectStangeogrnames2" resultMap="result">

        select *  from stangeogrnames where

        <if test="name!=null">
            name like #{name} and
        </if>
        status=1
        and userid=#{userid}


    </select>

    <update id="delStangeogrnames">

        update stangeogrnames

        set status=-1 where id=#{id}

          and userid=#{userid}

    </update>


    <update id="updateStangeogrnames">


        update  stangeogrnames
          set name=#{name} ,
           pictureurl=#{pictureurl}
           where id=#{id}   and userid=#{userid}

    </update>



    <select id="getStangeogrnamesCount" resultType="integer">

        select count(*)  from stangeogrnames
        where
        <if test="name!=null">
            name like #{name} and

        </if>
        status=1

        and userid=#{userid}

    </select>



    <select id="getStangeogrnamesById" resultMap="result">

        select *  from stangeogrnames
        where id=#{id}
        and status=1
        and userid=#{userid}

    </select>


    <select id="getStangeogrnamesById2" resultMap="result">

        select *  from stangeogrnames
        where id=#{id}
        and status=1
         and userid=#{userid}

    </select>

    <select id="getStangeogrnamesByMaxId" resultMap="result">

        select *  from stangeogrnames where id=
        (select max(id)  from stangeogrnames where status=1  and userid=#{userid})
        and status=1  and userid=#{userid}

    </select>

</mapper>