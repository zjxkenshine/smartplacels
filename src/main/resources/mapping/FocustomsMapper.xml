<?xml version = "1.0" encoding = "UTF-8"?>
<!DOCTYPE mapper PUBLIC
        "-//mybatis.org//DTD com.example.Mapper 3.0//EN"
        "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.csdl.smartplacenew.mapper.FocustomsMapper">
    <resultMap id="result" type="com.csdl.smartplacenew.information.Focustoms">
        <result property="id" column="id"/>
        <result property="name" column="name" />
        <result property="pictureurl" column="pictureurl" />
        <result property="status" column="status" />
        <result property="userid" column="userid" />

        <result property="type" column="type" />
        <result property="abbreviation" column="abbreviation" />
    </resultMap>

    <insert id="addFocustoms" >

        insert into focustoms(name, pictureurl, status,userid,type,abbreviation)

         values

         (#{name},#{pictureurl},#{status},#{userid},#{type},#{abbreviation})

    </insert>


    <select id="selectFocustoms" resultMap="result">

        select *  from focustoms where

        <if test="name!=null">
            name=#{name} and
        </if>
       status=1

       and userid=#{userid}

    </select>


    <select id="selectFocustoms2" resultMap="result">

        select *  from focustoms where

        <if test="name!=null">
            name like #{name} and
        </if>
        <if test="type!=null">
            type like #{type} and
        </if>

        status=1

        and userid=#{userid}



    </select>





    <update id="delFocustoms">

        update focustoms set status=-1 where id=#{id}   and userid=#{userid}

    </update>


    <update id="updateFocustoms">


        update  focustoms  set
        name=#{name} ,
        pictureurl=#{pictureurl},
        type=#{type},
        abbreviation=#{abbreviation}

        where id=#{id}   and userid=#{userid}

    </update>


    <select id="getFocustomsCount"  resultType="integer">

        select count(*)  from focustoms
        where
        <if test="name!=null">
            name like #{name}  and

        </if>

        <if test="type!=null">
            type like #{type} and

        </if>
        status=1
        and userid=#{userid}
    </select>


    <select id="getFocustomsById" resultMap="result">

        select *  from focustoms where id=#{id} and status=1 and userid=#{userid}
    </select>

    <select id="getFocustomsById2" resultMap="result">

        select *  from focustoms where id=#{id} and status=1     and userid=#{userid}
    </select>

    <select id="getFocustomsByMaxId" resultMap="result">

          select *  from focustoms where id=(select max(id)  from focustoms where status=1  and userid=#{userid} ) and status=1   and userid=#{userid}

    </select>

</mapper>